# === EXIN Ethical Hacking / Comptia Pentest ===

# 1- Planejamento e Obtenção de Informações
## 1.1 - Terminologia e Definições
- Ameaça: É um agente ou um ator que possa causar algum projuizo;
- Vulnerabilidade: É uma falha onde alguém ou algo possa explorar podendo gerar um projuízo;
- Risco: É onde a ameaça atinge a vulerabilidade;
- Exploit: É um código ou técnica utilizada por um adversário para 	concretizar a ameaça, tirando proveito de uma vulnerabilidade;
  
*Risco = Vulnerabilidade X Ameaça*  

*Teste de Invasão: Foco em encontrar vulnerabilidades de segurança em aplicações, redes e servidores,  permitindo que alguém ou algo tenha condições de coletar e/ou invadir ilegalmente informações de uma determinada organização.*
  
### Procedimentos
- Atividade técnica controlada;
- Testes de segurança;
- Simulação de ataques reais;
- Tentativa de acesso não autorizado;
- Arte desmistificada (tentar pensar como o atacante poderia executar a ação do ataque);
  
### Avaliação de Vulnerabilidades
Procedimento para apenas encontrar vulnerabilidades de segurança que podem ou não serem utilizadas para acesso indevido e obtenção de dados.
  
### Hacker Ético (White Hat)
Utiliza de metodologias, cria documentações com base no que foi encontrado, tem preocupação com o cliente, entendendo as necessidades do negócio, executa suas tarefas com limitações determinadas.
  
### Auditoria de Segurança
Procedimento para teste de acordo com padrões (Checklist)
  
### Legislação internacional
  
- União Europeia
- Estados Unidos
- Brasil, Lei 	número 12.737/2012 (Lei Carolina Dieckmann)
  
### Hacking ilegal é crime!!

## 1.2 - Justificativa & Motivação
- Entender os riscos reais que vulnerabilidades 	específicas apresentam ao seu negócio;
- Testar de fato a segurança de sua rede ou 	sistema de informação;
- Determinar se investimentos atuais estão 	realmente detectando e prevenindo ataques;
- É mais barato ser proativo!
- Milestone para projetos entratem ou não em produção;
- Manter-se em conformidade com normas 	internacionais;

# 2 – Etapas e Metodologias de Teste de Invasão
## 2.1 - Tipos de Testes de Invasão

- Infraestrutura = Envolve encontrar vulnerabilidades em estruturas de redes, sistemas operacionais e aplicações;
- Client-side = Encontrar vulnerabilidades no lado do software, como navegadores, players, programas de edição de arquivos, etc;
- Aplicação Web = Encontrar vulnerabilidades para aplicações Web, como sites e portais webs;
- Engenharia Social = Tentar coletar informações utilizando sistemas de phishing utilizando e-mails, telefonemas para aplicar golpes, revelando informações sensíveis; 
- Redes WiFi = Encontrar pontos de acesso sem fio não autorizados e/ou autorizados para tentar encontrar vulnerabilidades;
   
## 2.2 - Etapas de um Teste de Invasão
- Reconhecimento;
- Varredura;
- Exploração;
- Pós-Exploração (Atacantes) = Manter acesso (backdoors e rootkits) e esconder rastros;
   
## 2.3 – Metodologias (Frameworks / Guias)
- Open Source Security Testing Methodology Manual (OSSTMM) = Focado em transparência e no valor do negócio (informações mais amplas, não aprofundadas tecnicamente);
- Pen Testing Execution Stardard (PTES) = Tem algumas diretrízes para pré-preparação para efetuar os testes, reconhecimento, análises de vulnerabilidades e documentação;
- NIST Special Publicatio n800-115: Techinical Guide to Information Security, Testing and Assessment = Contém etapas de 	planejamento, descobertas, ataques e contém templates prontos para engajamento antes e depois dos testes;
- Open Web Application Security Project (OWASP) Testing Guide = Totalmente focado em testes tecnicos;
- Penetration Testing Framework = Bem aprofundado e com muitas ferramentas, cobrindo muito a parte técnica;
 
# 3.0 – Planejamento
Ante de iniciar qualquer testes deve-se ter um documento assinado pelo contratante, tendo um acordo legal, onde devem ser definidos os tipos de atividades que serão aplicadas, protegendo assim o consultor contra perda e danos que possam resultar dos testes efetuados, protejendo também o contratante definindo limites dos testes que serão aplicados.
   
Antes de inicar os testes deve-se documentar o que será feito, mostrando as ferramentas que serão utilizadas. Seguem abaixo os processos que devem ser feito antes dos testes:
- Detalhes  da Infraestrutura;
- Acordo de confidencialidade (NDA);
- Equipamento e recursos necessários;
- Relatório de linha do tempo;
- Acesso 	a testes anteriores;
- Inspeção física;
   
### Como classificar os atacantes?
- A = Programadores experientes, não buscam publicidade e dedicam boa parte de seu tempo ao estudo e atualização.   
- B = Conhecimento equivalente ao de bons administradores de sistemas, mais abrangência, menos profundidade, contribuem regularmente em listas e buscam conhecer novas ferramentas.   
- C = Dependem de scripts e pacotes pré-prontos, experimentação irresponsável, conhecimento incompleto e buscam notoriedade.

## 3.1 - Escopo
- Objetivo/Próposito = Em sua maioria o objetivo é encontrar vulnerabilidades;
- Alvos = Ativos da infraestrutura e aplicações (sistemas operacionais, aplicações, serviços, etc). Também podem ser pessoas, aplicando engenharia social;
- Profundidade = Até onde podemos executar os testes;
- Exclusões = Sistemas/Estruturas que não podem cair ou serem modificadas, parceiros/acordos de serviço e exclusão completa ou parcial;
   
## 3.2 - Tipos de Teste
- Caixa Preta (Blind) = Não temos nenhuma informação sobre o que será testado;
- Caixa Branca (Open) = Temos conhecimento total da infraestrutura, sistemas, etc; 
- Caixa Cinza (Hybrid) = É um intermédiário entre a caixa preta e caixa branca;

# 4 – Obtenção de Informações
- Metadados = Obtenção de documentos que contém informações (Ferramenta ExifTool);
- Whois = Busca de informações de domínio;
- Buscas na Internet & Google Hacking = Coletar informações públicas sobre um determinado alvo (ferramentas: SiteDigger, SearchDiggity, Harvester, Maltego);
- DNS = Buscas recursivas entre servidores regionais e top-level domains (ccTLD/gTLD) -  RFCs 1034/1035 (Ferramentas: nslookup / Dig);
- Engenharia Social = Arte de convencer outra pessoa de disponibilizar informações sobre alguém e/ou empresas - critério psicológico (Ferramenta: The Social-Enginner Toolkit - SET);
- Dumpster Diving = Coletar informações através de lixo corporativo;
- Cópia do Website = Análise offline, experimentação passiva, mirroring para phishing (Ferramentas: HTTrack / WEBHTTrack);

# 5 – Varredura  
O objetivo da varredura é entender mais sobre os alvos buscando brechas com a interação com o ambiente alvo, determinando alguns pontos importantes para este processo:
- Hosts 	vivos, firewalls, roteadores na rede;
- A 	topologia de rede;
- Os 	sistemas operacionais dos hosts;
- As 	portas abertas e serviços de rede;
- Potenciais 	vulnerabilidades;

A ferramenta mais utilizada para a execução da varredura é o NMAP.

# 6 – Exploração
### Formas de abusar de sistemas explorando:

- Vulnerabilidades em softwares
- Configurações 	fracas
- Problemas intrínsecos à protocolos
- Senhas fracas
- Pessoas & Processos
   
*Exploit: Código ou técnica que uma ameaça utiliza para tirar vantagem de uma vulnerabilidade, obtendo acesso e executando comandos de baixos e/ou altos privilégios.*

Exemplos:
   
- Obter/Mover/Substituir arquivos
- Escutar o tráfego de rede
- Reconfigurar/Instalar 	software
   
### Buffer Overflow
   
- Não verificação de limites extremos
- Essência dos exploits de binários
- Pré-datam 	a própria linguagem C (1972)
- Stack, 	Heap, Integer, ….